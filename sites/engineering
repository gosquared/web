server {
  server_name engineering.gosquared.com;

  set $blog https://www.gosquared.com/blog;
  rewrite '^/tag/(.+)$' $blog/tag/$1 permanent;
  rewrite '^/author/(.+)$' $blog/author/$1 permanent;
  rewrite ^/category/aws $blog/engineering permanent;
  rewrite ^/category/conferences-events $blog/engineering permanent;
  rewrite ^/category/development $blog/engineering permanent;
  rewrite ^/category/featured $blog/engineering permanent;
  rewrite ^/category/hack-days $blog/engineering permanent;
  rewrite ^/category/javascript-2 $blog/engineering permanent;
  rewrite ^/category/miscellaneous $blog/engineering permanent;
  rewrite ^/category/node-js $blog/engineering permanent;
  rewrite ^/category/ops $blog/engineering permanent;
  rewrite '^/category/(.+)$' $blog/category/$1 permanent;
  rewrite ^/the-t3-ec2-instance-family $blog$request_uri permanent;
  rewrite ^/building-the-deepracer-leaderboard $blog$request_uri permanent;
  rewrite ^/improve-javascript-page-load-time $blog$request_uri permanent;
  rewrite ^/salesforce-rest-api-integration $blog$request_uri permanent;
  rewrite ^/aws-cloudformation-cheat-sheet $blog$request_uri permanent;
  rewrite ^/authoring-elasticsearch-queries-javascript $blog$request_uri permanent;
  rewrite ^/pt-2-running-node-app-amazon-ecs $blog$request_uri permanent;
  rewrite ^/aws-reinvent-2017 $blog$request_uri permanent;
  rewrite ^/running-node-app-amazon-ecs $blog$request_uri permanent;
  rewrite ^/state-of-content-blocking $blog$request_uri permanent;
  rewrite ^/semantic-responsive-website-navigation $blog$request_uri permanent;
  rewrite ^/lambda-edge $blog$request_uri permanent;
  rewrite ^/july-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/redis-hmsetex $blog$request_uri permanent;
  rewrite ^/june-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/may-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/april-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/march-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/february-hack-day-2017 $blog$request_uri permanent;
  rewrite ^/csv-import $blog$request_uri permanent;
  rewrite ^/november-hack-day-2 $blog$request_uri permanent;
  rewrite ^/gosquared-rails-gem $blog$request_uri permanent;
  rewrite ^/september-hack-day $blog$request_uri permanent;
  rewrite ^/updated-ruby-gem $blog$request_uri permanent;
  rewrite ^/august-hack-day $blog$request_uri permanent;
  rewrite ^/july-hack-day-2016 $blog$request_uri permanent;
  rewrite ^/june-hack-day-2016 $blog$request_uri permanent;
  rewrite ^/may-hack-day-2016 $blog$request_uri permanent;
  rewrite ^/april-hack-day $blog$request_uri permanent;
  rewrite ^/march-hack-day $blog$request_uri permanent;
  rewrite ^/testing-with-docker $blog$request_uri permanent;
  rewrite ^/february-hack-day $blog$request_uri permanent;
  rewrite ^/november-hack-day $blog$request_uri permanent;
  rewrite ^/an-ops-team-walks-into-a-bar $blog$request_uri permanent;
  rewrite ^/october-hack-day $blog$request_uri permanent;
  rewrite ^/building-better-api-docs $blog$request_uri permanent;
  rewrite ^/elasticsearch-js-connector-for-amazon-es $blog$request_uri permanent;
  rewrite ^/we-are-going-to-allyourbase-conf-2015 $blog$request_uri permanent;
  rewrite ^/aws-video-case-study $blog$request_uri permanent;
  rewrite ^/july-hack-day $blog$request_uri permanent;
  rewrite ^/ipcheck-open-source $blog$request_uri permanent;
  rewrite ^/evolution-of-password-security $blog$request_uri permanent;
  rewrite ^/api-custom-date-format $blog$request_uri permanent;
  rewrite ^/may-hack-day $blog$request_uri permanent;
  rewrite ^/april-in-review $blog$request_uri permanent;
  rewrite ^/well-be-at-aws-summit-london $blog$request_uri permanent;
  rewrite ^/building-two-factor-authentication $blog$request_uri permanent;
  rewrite ^/optimise-node-http-server $blog$request_uri permanent;
  rewrite ^/t2-instances $blog$request_uri permanent;
  rewrite ^/impact-facebook-downtime-global-traffic $blog$request_uri permanent;
  rewrite ^/deprecation-insecure-http-api $blog$request_uri permanent;
  rewrite ^/ssl-vulnerability-poodle $blog$request_uri permanent;
  rewrite ^/meet-us-allyourbase-conf-2014 $blog$request_uri permanent;
  rewrite ^/looking-forward-to-the-future-of-javascript $blog$request_uri permanent;
  rewrite ^/optimising-60fps-everywhere-in-javascript $blog$request_uri permanent;
  rewrite ^/engineering-improvements-behind-the-new-gosquared $blog$request_uri permanent;
  rewrite ^/error-handling-using-domains-node-js $blog$request_uri permanent;
  rewrite ^/introducing-flutter-simple-twitter-api-auth $blog$request_uri permanent;
  rewrite ^/upgrading-amazon-rds-mysql-5-6-without-downtime $blog$request_uri permanent;
  rewrite ^/node-js-error-handling-callbacks-vs-promises $blog$request_uri permanent;
  rewrite ^/dealing-corrupt-sstable-cassandra $blog$request_uri permanent;
  rewrite ^/distributed-locks-using-redis $blog$request_uri permanent;
  rewrite ^/making-dashboard-faster $blog$request_uri permanent;
  rewrite ^/deploys-at-gosquared $blog$request_uri permanent;
  rewrite ^/admin-systems-in-node $blog$request_uri permanent;
  rewrite ^/use-elb-automatic-failover $blog$request_uri permanent;
  rewrite ^/infinite-dns-queries-free-route-53 $blog$request_uri permanent;
  rewrite ^/switching-from-campfire-to-slack $blog$request_uri permanent;
  rewrite ^/secure-sessions-http-proxy $blog$request_uri permanent;
  rewrite ^/video-databases-tech-gosquared $blog$request_uri permanent;
  rewrite ^/gosquared-static-website $blog$request_uri permanent;
  rewrite ^/expanding-a-cassandra-cluster $blog$request_uri permanent;
  rewrite ^/testing-your-application-why-when-what-how $blog$request_uri permanent;
  rewrite ^/give-your-node-js-server-100-more-welly $blog$request_uri permanent;
  rewrite ^/well-be-at-ayb13 $blog$request_uri permanent;
  rewrite ^/stop-gmail-clipping $blog$request_uri permanent;
  rewrite ^/gzip-tracking-code $blog$request_uri permanent;
  rewrite ^/the-new-gosquared-in-numbers $blog$request_uri permanent;
  rewrite ^/googles-downtime-40-drop-in-traffic $blog$request_uri permanent;
  rewrite ^/touchstart-events $blog$request_uri permanent;
  rewrite ^/a-year-of-dashboard $blog$request_uri permanent;
  rewrite ^/new-node-js-module-ribbon $blog$request_uri permanent;
  rewrite ^/shake $blog$request_uri permanent;
  rewrite ^/weve-built-a-ruby-module-for-you $blog$request_uri permanent;
  rewrite ^/aws-for-startups-presentation $blog$request_uri permanent;
  rewrite ^/come-see-us-at-aws-for-startups-campus-february-2013 $blog$request_uri permanent;
  rewrite ^/how-we-use-ec2-instance-tags $blog$request_uri permanent;
  rewrite ^/weve-built-a-node-js-module-for-you $blog$request_uri permanent;
  rewrite ^/optimising-nginx-node-js-and-networking-for-heavy-workloads $blog$request_uri permanent;
  rewrite ^/reverting-git-merges $blog$request_uri permanent;
  rewrite ^/migrating-mysql-to-amazon-rds $blog$request_uri permanent;
  rewrite ^/10-vital-aspects-of-building-a-node-js-application $blog$request_uri permanent;
  rewrite ^/gosquared-engineering $blog$request_uri permanent;
  return 301 $blog/category/engineering;
}
